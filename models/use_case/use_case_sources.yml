version: 2

sources:
  - name: USE_CASE_SALESFORCE
    description: "Salesforce raw data"
    database: EVOTEC_DB_DEV
    schema: DW_L02_PSH_ONE_CRM

    tables:
      - name: PSH_QUOTE
        description: "Salesforce Quote table"
        columns:
          - name: id
            tests:
              - unique
              - not_null
          - name: SBQQ__ACCOUNT__C
            tests:
              - relationships:
                  to: source ('DW_L02_PSH_ONE_CRM','PSH_ACCOUNT')
                  field: ID
          - name: SBQQ__OPPORTUNITY2__C
            tests:
              - relationships:
                  to: source ('DW_L02_PSH_ONE_CRM','PSH_QUOTELINE')
                  field: ID

      - name: PSH_QUOTELINE
        description: "Salesforce QuoteLine table"
        columns:
          - name: id
            tests:
              - unique
              - not_null
              - relationships:
                  to: source ('DW_L02_PSH_ONE_CRM','PSH_WS_2_PLAN')
                  field: WS_2_QUOTE_LINE_C

      - name: PSH_WS_2_PLAN
        description: "Salesforce Plan table"
        columns:
          - name: id
            tests:
              - unique
              - not_null
          - name: WS2_QUOTE_LINE__C
            tests:
              - relationships:
                  to: source ('DW_L02_PSH_ONE_CRM','PSH_QUOTELINE')
                  field: ID
